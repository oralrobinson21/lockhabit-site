<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LockHabit — Income & Expenses Calculator (See What You Can Lock)</title>
  <meta name="description" content="Estimate your after-tax income by state, add monthly expenses, and see how much you can safely lock. Send your plan to the LockHabit demo to simulate growth + interest."/>
  <link rel="canonical" href="https://lockhabit.com/calculator.html"/><meta name="theme-color" content="#6f7cff"/>
  <meta property="og:title" content="Income & Expenses Calculator — LockHabit"/>
  <meta property="og:description" content="Quickly estimate take-home pay by state, choose tax-exempt scenario, add expenses, and send to demo."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    :root{--brand:#6f7cff;--brand2:#9c78ff;--ink:#0f172a;--muted:#475569;--bg:#0b0e1a;--line:#e5e7f1}
    *{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.7 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--line);z-index:20}
    .wrap{max-width:1100px;margin:0 auto;padding:16px 20px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .btn{appearance:none;border:1px solid var(--line);background:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
    .btn.acc{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:0}
    .hero{background:radial-gradient(1200px 700px at 50% -200px, rgba(111,124,255,.25), transparent 60%),#f6f8ff;border-bottom:1px solid var(--line)}
    h1{margin:0;font-size:32px}.sub{margin:8px 0 0;color:#3a4a66}
    main{max-width:1100px;margin:0 auto;padding:20px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    .card{background:#fff;border:1px solid var(--line);border-radius:18px;padding:16px}
    label.k{display:block;font-size:12px;text-transform:uppercase;letter-spacing:.04em;color:#64748b;margin-bottom:6px}
    input,select{width:100%;padding:12px;border:1px solid #dbe0ea;border-radius:12px;font-size:16px}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .muted{color:#64748b}.v{font-weight:800;font-size:20px}
    .bar{height:10px;border-radius:999px;background:#edf0f6;overflow:hidden;border:1px solid #e5e8f1;margin-top:8px}
    .fill{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#6f7cff)}
    .note{font-size:12px;color:#64748b;margin-top:8px}
    footer{color:#cbd5e1;text-align:center;padding:18px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <div><a class="btn" href="/">← Home</a></div>
      <div class="row" style="gap:8px">
        <a class="btn" href="/demo.html">Open Demo</a>
        <a class="btn acc" href="#send">Send to Demo</a>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <h1>See what you can safely lock</h1>
      <p class="sub">Estimate take-home by state, add your monthly expenses, and instantly see a suggested contribution you could lock. Then send it to the demo to simulate growth + interest.</p>
    </div>
  </section>

  <main>
    <div class="grid">
      <div class="card">
        <h2 style="margin:0 0 8px">Income & Taxes</h2>
        <div class="two">
          <div>
            <label class="k">Annual gross income</label>
            <input id="gross" type="number" min="0" value="65000"/>
          </div>
          <div>
            <label class="k">Pay schedule</label>
            <select id="sched">
              <option value="weekly">Weekly (52)</option>
              <option value="biweekly" selected>Bi-weekly (26)</option>
              <option value="semimonthly">Semi-monthly (24)</option>
              <option value="monthly">Monthly (12)</option>
            </select>
          </div>
        </div>
        <div class="two" style="margin-top:10px">
          <div>
            <label class="k">State</label>
            <select id="state"></select>
          </div>
          <div>
            <label class="k">Tax exempt scenario</label>
            <select id="exempt">
              <option value="no" selected>No</option>
              <option value="yes">Yes (what-if)</option>
            </select>
          </div>
        </div>
        <div style="margin-top:12px">
          <div class="muted">Estimated annual taxes (federal + state)</div>
          <div class="v" id="taxAnnual">$0.00</div>
          <div class="bar"><div class="fill" id="taxFill"></div></div>
        </div>
      </div>

      <div class="card">
        <h2 style="margin:0 0 8px">Monthly Expenses</h2>
        <div class="two">
          <div>
            <label class="k">Rent / Mortgage</label>
            <input id="rent" type="number" min="0" value="1200"/>
          </div>
          <div>
            <label class="k">Utilities</label>
            <input id="util" type="number" min="0" value="180"/>
          </div>
        </div>
        <div class="two" style="margin-top:10px">
          <div>
            <label class="k">Food & Transport</label>
            <input id="food" type="number" min="0" value="550"/>
          </div>
          <div>
            <label class="k">Debt payments</label>
            <input id="debt" type="number" min="0" value="250"/>
          </div>
        </div>
        <div class="two" style="margin-top:10px">
          <div>
            <label class="k">Other</label>
            <input id="other" type="number" min="0" value="150"/>
          </div>
          <div>
            <label class="k">Safety buffer</label>
            <select id="buffer">
              <option value="0.05">5% (recommended)</option>
              <option value="0.1" selected>10% (safer)</option>
              <option value="0.15">15% (extra safe)</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="grid" style="margin-top:16px">
      <div class="card" id="snapshot">
        <h2 style="margin:0 0 8px">Your Snapshot</h2>
        <div class="two">
          <div>
            <div class="muted">Take-home (monthly)</div>
            <div class="v" id="netMonthly">$0.00</div>
          </div>
          <div>
            <div class="muted">Expenses (monthly)</div>
            <div class="v" id="expMonthly">$0.00</div>
          </div>
        </div>
        <div class="two" style="margin-top:10px">
          <div>
            <div class="muted">Safe surplus (monthly)</div>
            <div class="v" id="surplusMonthly">$0.00</div>
          </div>
          <div>
            <div class="muted">Suggested lock (bi-weekly)</div>
            <div class="v" id="suggestBiweekly">$0.00</div>
          </div>
        </div>
        <div class="note">Estimates only based on simplified tax and expense assumptions. Your actual results may vary.</div>
      </div>

      <div class="card" id="send">
        <h2 style="margin:0 0 8px">Send to Demo</h2>
        <p class="muted">Send your plan to the demo to see it grow with interest.</p>
        <div class="two">
          <div>
            <label class="k">Initial deposit</label>
            <input id="init" type="number" min="0" value="1500"/>
          </div>
          <div>
            <label class="k">Lock term</label>
            <select id="term">
              <option value="3">3 months</option>
              <option value="6">6 months</option>
              <option value="12" selected>12 months</option>
              <option value="18">18 months</option>
              <option value="24">24 months</option>
            </select>
          </div>
        </div>
        <div style="margin-top:12px" class="two">
          <button class="btn" id="preview">Preview numbers</button>
          <button class="btn acc" id="toDemo">Open in Demo</button>
        </div>
      </div>
    </div>
  </main>

  <footer>© <span id="yr"></span> LockHabit — Calculator</footer>

  <script>
    document.getElementById('yr').textContent=new Date().getFullYear();

    // Minimal state tax map (illustrative averages; not advice)
    const STATE_TAX = {
      AL:0.04, AK:0, AZ:0.025, AR:0.04, CA:0.045, CO:0.045, CT:0.05, DE:0.04, FL:0,
      GA:0.04, HI:0.05, ID:0.045, IL:0.0495, IN:0.0323, IA:0.035, KS:0.04, KY:0.05,
      LA:0.03, ME:0.05, MD:0.0475, MA:0.05, MI:0.0425, MN:0.05, MS:0.04, MO:0.04,
      MT:0.05, NE:0.045, NV:0, NH:0, NJ:0.05, NM:0.04, NY:0.055, NC:0.0475, ND:0.025,
      OH:0.03, OK:0.04, OR:0.07, PA:0.0307, RI:0.04, SC:0.04, SD:0, TN:0, TX:0, UT:0.0495,
      VT:0.05, VA:0.045, WA:0, WV:0.05, WI:0.04, WY:0
    };
    const FED_FLAT = 0.18; // simplified average effective federal rate for demo

    const stateSel = document.getElementById('state');
    stateSel.innerHTML = Object.keys(STATE_TAX).map(s=>`<option value="${s}">${s}</option>`).join('');
    stateSel.value = 'NY';

    const $ = id=>document.getElementById(id);
    const fields = ['gross','sched','state','exempt','rent','util','food','debt','other','buffer','init','term'].map($);

    function payPeriods(s){return s==='weekly'?52:s==='biweekly'?26:s==='semimonthly'?24:12}

    function recalc(){
      const gross = Number($('gross').value||0);
      const sched = $('sched').value;
      const st    = $('state').value;
      const exempt= $('exempt').value==='yes';
      const per   = payPeriods(sched);

      const stateRate = exempt?0: (STATE_TAX[st]||0);
      const fedRate   = exempt?0: FED_FLAT;

      const taxes = gross*(fedRate+stateRate);
      const netAnnual = gross - taxes;
      const netMonthly = netAnnual/12;

      const exp = ['rent','util','food','debt','other'].map(id=>Number($(id).value||0)).reduce((a,b)=>a+b,0);
      const buf = Number($('buffer').value||0);
      const safeMonthly = Math.max(0, (netMonthly-exp) * (1-buf));

      // Suggest bi-weekly lock from monthly safe surplus
      const suggestBiweekly = safeMonthly / 2;

      $('taxAnnual').textContent = taxes.toLocaleString(undefined,{style:'currency',currency:'USD'});
      $('netMonthly').textContent = netMonthly.toLocaleString(undefined,{style:'currency',currency:'USD'});
      $('expMonthly').textContent = exp.toLocaleString(undefined,{style:'currency',currency:'USD'});
      $('surplusMonthly').textContent = safeMonthly.toLocaleString(undefined,{style:'currency',currency:'USD'});
      $('suggestBiweekly').textContent = suggestBiweekly.toLocaleString(undefined,{style:'currency',currency:'USD'});

      const pct = Math.max(0, Math.min(100, (taxes/(gross||1))*100));
      $('taxFill').style.width = pct.toFixed(0)+'%';

      // Store preview for demo
      window.__calcPreview = {
        initial: Number($('init').value||0),
        recurring: Math.round(suggestBiweekly),
        frequency: 'biweekly',
        months: Number($('term').value||12),
        state: st, exempt, gross, schedule: sched
      };
    }
    fields.forEach(el=>el.addEventListener('input', recalc));
    recalc();

    $('preview').addEventListener('click', ()=>{
      recalc();
      const p = window.__calcPreview;
      alert(`Preview\n\nInitial: $${p.initial}\nRecurring (bi-weekly): $${p.recurring}\nTerm: ${p.months} months\nState: ${p.state}\nTax-exempt: ${p.exempt?'Yes':'No'}`);
    });

    $('toDemo').addEventListener('click', ()=>{
      recalc();
      localStorage.setItem('lh_calc', JSON.stringify(window.__calcPreview||{}));
      // Also pass via query for convenience
      const p = window.__calcPreview||{};
      const u = new URL('/demo.html', location.origin);
      Object.entries({
        initial:p.initial, recurring:p.recurring, freq:p.frequency, months:p.months
      }).forEach(([k,v])=>u.searchParams.set(k,String(v)));
      location.href = u.toString();
    });
  </script>
</body>
</html>